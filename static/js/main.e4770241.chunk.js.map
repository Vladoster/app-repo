{"version":3,"sources":["panels/Home.js","panels/Persik.js","panels/Result.js","App.js","index.js"],"names":["Home","id","fetchedUser","className","onClick","document","getElementById","classList","add","Persik","style","removeAttribute","Result","props","sub","bot","App","useState","setUser","groupID","secret","v_bot_api","bot_id","a","connect","sendPromise","group_id","result","user","console","log","allow","strForHash","md5","require","hash","formData","FormData","append","fetch","method","body","api_url","json","datas","success","accessToken","params","add_to_news","v","user_ids","access_token","link_text","link_url","answer","canvas","ctx","getContext","strokeStyle","fillStyle","beginPath","arc","Math","PI","closePath","stroke","fill","image","Image","src","toDataURL","response","upload_url","header","useEffect","request_id","user_id","isMember","subscribe","detail","type","data","schemeAttribute","createAttribute","value","scheme","attributes","setNamedItem","fetchData","setUserStory","send","ReactDOM","render"],"mappings":"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","file":"static/js/main.e4770241.chunk.js","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport './Home.css'\r\n\r\nconst Home = ({ id, fetchedUser }) => (\r\n\t\t\t<div id=\"screen_1\" className=\"container\">\r\n\t\t\t\t<div id=\"header\" className=\"header\">\r\n\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"item_block\">\r\n\t\t\t\t\t\t<div className=\"item\" onClick= {function(){document.getElementById('body').classList.add('grad-rus'); }}>\r\n\t\t\t\t\t\t\t<div className=\"img rus\"></div>\r\n\t\t\t\t\t\t\t<span className=\"txt\">русский язык</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"item_block\">\r\n\t\t\t\t\t\t<div className=\"item\" onClick= {function(){document.getElementById('body').classList.add('grad-math');}}>\r\n\t\t\t\t\t\t\t<div className=\"img math\"></div>\r\n\t\t\t\t\t\t\t<span className=\"txt\">математика</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"item_block\">\r\n\t\t\t\t\t\t<div className=\"item\" onClick= {function(){document.getElementById('body').classList.add('grad-litra');}}>\r\n\t\t\t\t\t\t\t<div className=\"img litra\"></div>\r\n\t\t\t\t\t\t\t<span className=\"txt\">литература</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"item_block\">\r\n\t\t\t\t\t\t<div className=\"item\" onClick= {function(){document.getElementById('body').classList.add('grad-history');}}>\r\n\t\t\t\t\t\t\t<div className=\"img history\"></div>\r\n\t\t\t\t\t\t\t<span className=\"txt\">история</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"item_block\">\r\n\t\t\t\t\t\t<div className=\"item\" onClick= {function(){document.getElementById('body').classList.add('grad-soc');}}>\r\n\t\t\t\t\t\t\t<div className=\"img soc\"></div>\r\n\t\t\t\t\t\t\t<span className=\"txt\">общество</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"item_block\">\r\n\t\t\t\t\t\t<div className=\"item\" onClick= {function(){document.getElementById('body').classList.add('grad-phys');}}>\r\n\t\t\t\t\t\t\t<div className=\"img phys\"></div>\r\n\t\t\t\t\t\t\t<span className=\"txt\">физика</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"item_block\">\r\n\t\t\t\t\t\t<div className=\"item\" onClick= {function(){document.getElementById('body').classList.add('grad-bio');}}>\r\n\t\t\t\t\t\t\t<div className=\"img bio\"></div>\r\n\t\t\t\t\t\t\t<span className=\"txt\">биология</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"item_block\">\r\n\t\t\t\t\t\t<div className=\"item\" onClick= {function(){document.getElementById('body').classList.add('grad-lang');}}>\r\n\t\t\t\t\t\t\t<div className=\"img lang\"></div>\r\n\t\t\t\t\t\t\t<span className=\"txt\">английский язык</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"item_block\">\r\n\t\t\t\t\t\t<div className=\"item\" onClick= {function(){document.getElementById('body').classList.add('grad-chem');}}>\r\n\t\t\t\t\t\t\t<div className=\"img chem\"></div>\r\n\t\t\t\t\t\t\t<span className=\"txt\">химия</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n);\r\n\r\nHome.propTypes = {\r\n\tid: PropTypes.string.isRequired,\r\n\tfetchedUser: PropTypes.shape({\r\n\t\tphoto_200: PropTypes.string,\r\n\t\tfirst_name: PropTypes.string,\r\n\t\tlast_name: PropTypes.string,\r\n\t\tcity: PropTypes.shape({\r\n\t\t\ttitle: PropTypes.string,\r\n\t\t}),\r\n\t}),\r\n};\r\n\r\nexport default Home;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n\r\n\r\nconst Persik = ({ id}) =>(\r\n \t<div id=\"screen_2\" className=\"container\">\r\n\t\t<div className=\"header\"></div>\r\n\t\t<div className=\"row\">\r\n\t\t\t<div className=\"subj_item_block\">\r\n\t\t\t\t<div className=\"subj_item\">\r\n\t\t\t\t\t<div className=\"img\"></div>\r\n\t\t\t\t\t<div className=\"counter\">\r\n\t\t\t\t\t\t<span id=\"first_num\">0</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div id=\"start_btn\" className=\"btn\">мне повезет!</div>\r\n\t\t\t\t</div>\r\n        <div id=\"btn_fwd\" className=\"btn_fwd\" style={{\"display\":\"none\"}} onClick={function(){document.getElementById('body').removeAttribute('class');document.getElementById('body').classList.add('last');}}>принять участие и<br/>выиграть айфон</div>\r\n\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n);\r\n\r\nPersik.propTypes = {\r\n\tid: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default Persik;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n\r\nconst Result = props =>(\r\n<div id=\"screen_3\" className=\"container\">\r\n\t\t<div id=\"back\" className=\"back_btn\"></div>\r\n\t\t<div id=\"header_3\" className=\"header\">\r\n\t\t</div>\r\n    <div className=\"sub_header\">2 очень простых условия и</div>\r\n    <div id=\"header_4\" className=\"header\">\r\n\t\t</div>\r\n\t\t<div className=\"sub_header\">в розыгрыше айфона и</div>\r\n\t\t<div className=\"sub_header\">других 500 крутых призов</div>\r\n\t\t<div className=\"img\"></div>\r\n\t\t<div onClick={props.sub} id=\"subscribe\" className=\"btn solid_red\">подписаться на <br/> sattarovfamily</div>\r\n\t\t<div id=\"bot\" onClick={props.bot} className=\"btn solid_red\">написать в лс</div>\r\n\t\t<div className=\"sub_header\">расскажи друзьям о своих<br/>результатах егэ</div>\r\n\t\t<div className=\"btn orange\">опубликовать<br/>историю</div>\r\n\t</div>\r\n);\r\n\r\nResult.propTypes = {\r\n\tid: PropTypes.string.isRequired,\r\n  sub: PropTypes.func.isRequired,\r\n\tbot: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Result;\r\n","import React, { useState, useEffect } from 'react';\r\nimport connect from '@vkontakte/vk-connect';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\n\r\nimport Home from './panels/Home';\r\nimport Persik from './panels/Persik';\r\nimport Result from './panels/Result';\r\n\r\nconst App = () => {\r\n\tconst [fetchedUser, setUser,isMember] = useState(null);\r\n\tconst groupID = 187604202;\r\n\tconst secret = \"c4b65d2c124eef4594063ca1dcddb334da55ae4a\";\r\n\tconst app_ID = 7169773;\r\n\tconst v_bot_api = \"5.90\";\r\n\tconst bot_id = 69086;\r\n\r\n\tasync function subscribe(){\r\n\t\tconst res = await connect.sendPromise('VKWebAppJoinGroup', { group_id: groupID  });\r\n\t\tif(res.result===true){\r\n\t\t\tdocument.getElementById('subscribe').classList.add('checked');\r\n\t\t}\r\n\t}\r\n\tasync function addUserToBot(){\r\n\t\tconst user = await connect.sendPromise('VKWebAppGetUserInfo');\r\n\t\tconsole.log(user);\r\n\t\tconst allow=await connect.sendPromise('VKWebAppAllowMessagesFromGroup', {group_id: groupID,});// разрещение отправлять сообщеньки от группы\r\n\t\tconsole.log(allow);\r\n\t\tif(allow.result === true){\r\n\t\t\tvar strForHash=''+groupID+''+user.id+''+bot_id+''+v_bot_api+''+secret;\r\n\t\t\tvar md5 = require('md5');\r\n\t\t\tconsole.log(strForHash);\r\n\t\t\tvar hash = md5(strForHash);\r\n\t\t\tconsole.log(hash);\r\n\t\t\tvar data = {};\r\n\t\t\tvar formData = new FormData();\r\n\t\t  formData.append('vk_group_id', groupID);\r\n\t\t\tformData.append('vk_user_id', user.id);\r\n\t\t\tformData.append('bot_id', bot_id);\r\n\t\t\tformData.append('v', v_bot_api);\r\n\t\t\tformData.append('hash', hash);\r\n\t\t\tconst api_url = await fetch('https://senler.ru/api/bots/AddSubscriber',\r\n\t\t\t{\r\n   \t\t\tmethod: 'POST',\r\n\t\t\t\tbody: formData,\r\n\t\t\t});\r\n\t\t\tconst datas = await api_url.json();\r\n\t\t\tconsole.log(datas.success);\r\n\t\t\tif(datas.success==true){\r\n\t\t\t\t\t\t\t\t\t document.getElementById('bot').classList.add('checked');\r\n\t\t\t}\r\n\t\t  //\tconsole.log(JSON.stringify(data));\r\n\r\n  \t}\r\n\t};\r\n  async function setUserStory(){\r\n\t\tconst accessToken= await connect.sendPromise(\"VKWebAppGetAuthToken\", {\"app_id\": 7169773, \"scope\": \"stories, groups\"});\r\n\t\tconst answer=await connect.sendPromise('VKWebAppCallAPIMethod', {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmethod: 'stories.getPhotoUploadServer',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tadd_to_news: 1,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv: '5.101',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser_ids: [69830281],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taccess_token: accessToken.access_token,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlink_text: 'view',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlink_url: `https://vk.com/app7169773`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\tconsole.log(answer);\r\n\r\n\t\tvar canvas = document.getElementById(\"canvas\");\r\n\t\tvar ctx = canvas.getContext(\"2d\");\r\n\t\t// Рисуем окружность\r\n\t\tctx.strokeStyle = \"#000\";\r\n\t\tctx.fillStyle = \"#fc0\";\r\n\t\tctx.beginPath();\r\n\t\tctx.arc(100,100,50,0,Math.PI*2,true);\r\n\t\tctx.closePath();\r\n\t\tctx.stroke();\r\n\t\tctx.fill();\r\n\r\n\t\t// ... получить ссылку для загрузки картинки в ВК\r\n\t\t// Потом:\r\n\t\tvar formData = new FormData();\r\n\t\tvar image = new Image();\r\n\t\timage.src = canvas.toDataURL(\"image/png\");\r\n\t  formData.append('file', image);\r\n\r\n\t\tconst api_url = await fetch(answer.response.upload_url,\r\n\t\t{\r\n\t\t\tmethod: 'POST',\r\n\t\t\theader:{\r\n\t\t\t\t'Content-Type': 'multipart/form-data'\r\n\t\t\t},\r\n\t\t\tbody: formData,\r\n\t\t});\r\n\t\tconst datas = await api_url.json();\r\n\t\tconsole.log(datas);\r\n// внутри callback'а:\r\n\r\n\t};\r\n\tuseEffect(() => {\r\n\t\tconnect.subscribe(({ detail: { type, data }}) => {\r\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\r\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\r\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\r\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\r\n\t\t\t}\r\n\t\t});\r\n\t\tasync function fetchData() {\r\n\t\t\tconst user = await connect.sendPromise('VKWebAppGetUserInfo');\r\n\t\t//\tconnect.send('VKWebAppJoinGroup', { group_id: 187604202  }); //Предложение происоединиться к группе\r\n\t\t//connect.send('VKWebAppAllowMessagesFromGroup', {group_id: groupID,});// разрещение отправлять сообщеньки от группы\r\n\r\n\t\t\tconst accessToken= await connect.sendPromise(\"VKWebAppGetAuthToken\", {\"app_id\": 7169773, \"scope\": \"stories, groups\"});\r\n\t\t/*\tconnect.send('VKWebAppShowWallPostBox', {\r\n\t\t\t\t message: \"Участвуй \",\r\n\t\t\t\t attachments: 'photo-187604202_457239018',\r\n\t\t\t });*/\r\n\t\t\t console.log(accessToken.access_token);\r\n\t\t\t const isMember= await connect.sendPromise('VKWebAppCallAPIMethod', {\r\n\t\t\t\t\t method: 'groups.isMember',\r\n\t\t\t\t\t request_id: 'isMember',\r\n\t\t\t\t\t params: {\r\n\t\t\t\t\t\t group_id: 187604202,\r\n\t\t\t\t\t\t v: '5.101',\r\n\t\t\t\t\t\t access_token: accessToken.access_token,\r\n\t\t\t\t\t\t user_id: user.id,\r\n\t\t\t\t\t }\r\n\t\t\t\t });\r\n\t\t\t\t console.log(isMember.response);\r\n\t\t\t\t if(isMember.response == 1){\r\n\t\t\t\t\t console.log(document.getElementById('subscribe'));\r\n\t\t\t\t\t document.getElementById('subscribe').classList.add('checked');\r\n\t\t\t\t }\r\n\t\t \t\tconst allow=await connect.sendPromise('VKWebAppAllowMessagesFromGroup', {group_id: groupID,});// разрещение отправлять сообщеньки от группы\r\n\t\t \t\tconsole.log(allow);\r\n\t\t \t\tif(allow.result === true){\r\n\t\t \t\t\tvar strForHash=''+groupID+''+user.id+''+bot_id+''+v_bot_api+''+secret;\r\n\t\t \t\t\tvar md5 = require('md5');\r\n\t\t \t\t\tconsole.log(strForHash);\r\n\t\t \t\t\tvar hash = md5(strForHash);\r\n\t\t \t\t\tconsole.log(hash);\r\n\t\t \t\t\tvar data = {};\r\n\t\t \t\t\tvar formData = new FormData();\r\n\t\t \t\t  formData.append('vk_group_id', groupID);\r\n\t\t \t\t\tformData.append('vk_user_id', user.id);\r\n\t\t \t\t\tformData.append('bot_id', bot_id);\r\n\t\t \t\t\tformData.append('v', v_bot_api);\r\n\t\t \t\t\tformData.append('hash', hash);\r\n\t\t \t\t\tconst api_url = await fetch('https://senler.ru/api/bots/AddSubscriber',\r\n\t\t \t\t\t{\r\n\t\t    \t\t\tmethod: 'POST',\r\n\t\t \t\t\t\tbody: formData,\r\n\t\t \t\t\t});\r\n\t\t \t\t\tconst datas = await api_url.json();\r\n\t\t \t\t\tconsole.log(datas.success);\r\n\t\t \t\t\tif(datas.success==true){\r\n\t\t \t\t\t\t\t\t\t\t\t document.getElementById('bot').classList.add('checked');\r\n\t\t \t\t\t}\r\n\t\t\t\t}\r\n\t\t/*\tconst answer=await connect.send('VKWebAppCallAPIMethod', {\r\n      method: 'stories.getPhotoUploadServer',\r\n      params: {\r\n        add_to_news: 1,\r\n        v: '5.101',\r\n\t\t\t\tuser_ids: [user.id],\r\n        link_text: 'view',\r\n        link_url: `https://vk.com/app7169773`,\r\n      },\r\n    });*/\r\n\r\n\t\t//\tconsole.log(answer)\r\n\t\t\tsetUser(user);\r\n\t\t}\r\n\t\tfetchData();\r\n\t\tsetUserStory();\r\n\t//\taddUserToBot();\r\n\t}, []);\r\n\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Home id='home' fetchedUser={fetchedUser}/>\r\n\t\t\t<Persik id='persik'  />\r\n\t\t\t<Result id='result' sub={subscribe} bot={addUserToBot} />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","import 'core-js/features/map';\r\nimport 'core-js/features/set';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport connect from '@vkontakte/vk-connect';\r\nimport App from './App';\r\n// import registerServiceWorker from './sw';\r\n\r\n// Init VK  Mini App\r\nconnect.send('VKWebAppInit');\r\n\r\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\r\n// расскомментируйте строку с registerServiceWorker();\r\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\r\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT\r\n// registerServiceWorker();\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}